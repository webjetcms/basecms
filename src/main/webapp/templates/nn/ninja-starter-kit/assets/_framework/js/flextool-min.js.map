{"version":3,"sources":["webpack:///.-modules/src/flextool/js/flextool.js"],"names":["applyDialog","scope","jQuery","document","each","dialog","window","app","Dialog","themes","$element","$","this","href","attr","pattern","tmvl","Math","random","urlGlue","setAttribute","indexOf","click","event","preventDefault","target","ajax","url","join","timeout","nn","settings","ajaxTimeout","done","data","results","exec","contents","setContent","show","fail","flexTool","api","initializeComponents","$this","undefined","component","accumulatedPensionDialog","AccumulatedPensionDialog","load","StepNavigation","element","e","prototype","self","hide","tools","ResultColumn","MAX_BAR_HEIGHT","update","parent","find","html","intro","updateBarGraph","barGraph","updateTable","table","updateTexts","explanation","createBarGraph","appendTo","legend","graphInsertPoint","insertBefore","empty","initGraphMeasures","columns","newBar","nrOfBars","length","i","getBarBlocks","blocks","blocksData","bar","total","n","value","height","barHeight","floor","MAX_TOTAL","nextBottom","ceil","block","css","addClass","label","toLowerCase","text","getBarTotal","b","highestBarTotal","max","tableData","pensionsoonerlater","pensionaowage","pensionageyear","pensionagemonth","calcaowageyear","calcaowagemonth","parttimepension","parttimepensionageyear","parttimepensionagemonth","parttimepensionperc","pensionheightadjust","adjusttype","adjustheighthigh","adjustheightlow","partnerpension","whendeceased","pensionperc","partnerpensionwithoutpartner","rekterm","remove","htmlString","disclaimer","title","subtitle","tableheaders","headerRow","split","firstRow","firstrow","secondRow","secondrow","thirdRow","fourthRow","fifthRow","thirdrow","fourthrow","fifthrow","partnersubtitle","lock","unlock","removeClass","resultColumn"],"mappings":"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","file":"flextool-min.js","sourcesContent":["import '../styles/flextool-gx.scss';\nimport '../styles/lightbox.scss';\nimport '../styles/mijn-getal-gx.scss';\nimport '../styles/mijn-getal.scss';\n\n/**\n * Set up the Banksparen namespaces.\n */\n\nnn.flexTool = {};\n\nnn.api.flexTool = {};\n\n/**\n * Initialize all FlexTool components. For all elements with\n * a data-component attribute, a matching constructor object\n * is found and initialized.\n */\n\nnn.flexTool.initializeComponents = function () {\n\n  $('[data-component]:not([data-initialized])').each(function () {\n\n    var $this = $(this);\n    if (nn.flexTool.component[$this.data('component')] !== undefined) {\n      new nn.flexTool.component[$this.data('component')](this);\n      $this.attr('data-initialized', true);\n    }\n  });\n};\n\n/** ******************************************************************************** *\n *                                                                                   *\n *                                       A P I                                       *\n *                                                                                   *\n *  ******************************************************************************** */\n\n/** ------------~ A C C U M U L A T E D   P E N S I O N   D I A L O G ~------------- */\n\nnn.api.flexTool.accumulatedPensionDialog = {};\n\n/**\n * Show the Accumulated pension dialog.\n *\n * @param {string} url\n * The screen to show.\n */\n\nnn.api.flexTool.accumulatedPensionDialog.show = function (url) {\n  nn.flexTool.accumulatedPensionDialog = new nn.flexTool.component.AccumulatedPensionDialog();\n  nn.flexTool.accumulatedPensionDialog.load(url);\n};\n\n/**\n * Load a screen into the dialog.\n *\n * @param {string} url\n * The screen's url.\n */\n\nnn.api.flexTool.accumulatedPensionDialog.load = function (url) {\n  nn.flexTool.accumulatedPensionDialog.load(url);\n};\n\n/** ******************************************************************************** *\n *                                                                                   *\n *                                C O M P O N E N T S                                *\n *                                                                                   *\n *  ******************************************************************************** */\n\nnn.flexTool.component = {};\n\n/** -----------------------~ S T E P   N A V I G A T I O N ~------------------------ */\n\nnn.flexTool.component.StepNavigation = function (element) {\n  $('a', element).each(function () {\n    $(this).click(function (e) {\n      e.preventDefault();\n\n      nn.api.flexTool.accumulatedPensionDialog.load(this.href);\n    });\n  });\n};\n\n/** ------------~ A C C U M U L A T E D   P E N S I O N   D I A L O G ~------------- */\n\n/**\n * Create a new accumulated pension dialog.\n */\n\nnn.flexTool.component.AccumulatedPensionDialog = function () {\n  this.dialog = new window.app.Dialog({themes: ['light', 'l', 'accumulated-pension']});\n};\n\n/**\n * Show the accumulated pension dialog.\n */\n\n/**\n * Load a screen into the dialog.\n *\n * @param {string} url\n * The screen's url.\n */\n\nnn.flexTool.component.AccumulatedPensionDialog.prototype.load = function (url) {\n  var self = this;\n  var pattern = /<body[^>]*>((.|[\\n\\r])*)<\\/body>/im;\n\n  $.ajax({\n    url: url,\n    timeout: nn.settings.ajaxTimeout\n  })\n    .done(function (data) {\n\n      var results = pattern.exec(data);\n      var contents = data;\n      if (results !== null) {\n        contents = results[1];\n      }\n      self.dialog.setContent(contents);\n      self.dialog.show();\n\n      nn.flexTool.initializeComponents();\n    })\n    .fail(function () {\n      self.dialog.hide();\n    });\n};\n\n/** ******************************************************************************** *\n *                                                                                   *\n *                                     T O O L S                                     *\n *                                                                                   *\n *  ******************************************************************************** */\n\nnn.tools = nn.tools || {};\nnn.tools.flexTool = {};\n\nnn.tools.flexTool.ResultColumn = function (element) {\n  this.element = $(element);\n  this.MAX_BAR_HEIGHT = 200;\n};\n\n\nnn.tools.flexTool.ResultColumn.prototype = {\n\n  update: function (results) {\n    var introInsertPoint = $('.mijngetal-grid .schedule-appointment').parent().find(\"p:first\");\n    introInsertPoint.html(results.intro);\n\n    applyDialog();\n    this.updateBarGraph(results.barGraph);\n    this.updateTable(results.table);\n    this.updateTexts(results.explanation);\n  },\n  createBarGraph: function () {\n    this.barGraph = $('<div class=\"bar-graph\"/>');\n\n    $('<div class=\"bars\"/>').appendTo(this.barGraph);\n    this.legend = $('<ul class=\"legend\"/>').appendTo(this.barGraph);\n\n    //  this.barGraph.insertBefore('.mijngetal-grid .schedule-appointment');\n    var graphInsertPoint = $('.mijngetal-grid .schedule-appointment-button').parent();\n    this.barGraph.insertBefore(graphInsertPoint);\n  },\n  updateBarGraph: function (results) {\n    if (this.barGraph === undefined) {\n      this.createBarGraph(results);\n    }\n\n    // clear current graph and legend\n    $('.bars').empty();\n    this.legend.empty();\n\n    this.initGraphMeasures(results.columns);\n\n    var nrOfBars = results.columns.length,\n      newBar,\n      legendItem;\n\n    for (var i = 0; i < nrOfBars; i++) {\n      newBar = $('<div class=\"bar\"></div>');\n      this.getBarBlocks(results.columns[i].blocks, newBar);\n      newBar.appendTo('.bars');\n      legendItem = $('<li>' + results.columns[i].legend + '</li>');\n      legendItem.appendTo(this.legend);\n    }\n  },\n  getBarBlocks: function (blocksData, bar) {\n    /** Calculate the bar's height */\n\n    var total = 0;\n    for (var n = 0; n < blocksData.length; n++) {\n      total += blocksData [n].value;\n    }\n\n    var barHeight = Math.floor(total / this.MAX_TOTAL * this.MAX_BAR_HEIGHT);\n    var nextBottom = 0,\n      height;\n\n    for (var i = 0; i < blocksData.length; i++) {\n      height = Math.ceil(blocksData[i].value / this.MAX_TOTAL * this.MAX_BAR_HEIGHT);\n      var block = $('<div/>').css('height', height + 'px')\n        .css('bottom', nextBottom + 'px')\n        .css('line-height', height - 2 + 'px')\n        .addClass(blocksData[i].label.toLowerCase())\n        .html(blocksData[i].label)\n        .appendTo(bar);\n\n      /** Make sure the bar doesn't exceed the bar's max height. */\n\n      if (height + nextBottom > barHeight) {\n        height = barHeight - nextBottom;\n      }\n\n      if (i > 0) {\n        block.css('height', height - 1).css('border-bottom', '1px solid #fff');\n      }\n\n      if (height < 8) {\n        block.text('');\n      }\n\n      nextBottom += height;\n    }\n  },\n  initGraphMeasures: function (columns) {\n\n    var getBarTotal = function (blocks) {\n      var total = 0;\n      for (var b = 0; b < blocks.length; b++) {\n        total += blocks[b].value;\n      }\n      return total;\n    }\n\n    var highestBarTotal = 0;\n    var nrOfBars = columns.length;\n\n    for (var i = 0; i < nrOfBars; i++) {\n      highestBarTotal = Math.max(highestBarTotal, getBarTotal(columns[i].blocks));\n    }\n    this.MAX_TOTAL = highestBarTotal;\n  },\n  updateTable: function (tableData) {\n    $('.mijngetal-grid .schedule-appointment-button').parent().show();\n\n    if (tableData.pensionsoonerlater === 'J') {\n      $('.pensioenwensen .pensioen-eerderoflater').html(\"Ja\");\n      if (tableData.pensionaowage === 'N') {\n        $('.pensioenwensen .pensioen-aowleeftijd').html(\"Nee\");\n        $('.pensioenwensen .pensioen-leeftijd').html(tableData.pensionageyear + ' jaar ' + tableData.pensionagemonth + ' maanden');\n      } else if (tableData.pensionaowage === 'J') {\n        $('.pensioenwensen .pensioen-aowleeftijd').html(\"Ja\");\n        $('.pensioenwensen .pensioen-leeftijd').html(tableData.calcaowageyear + ' jaar ' + tableData.calcaowagemonth + ' maanden');\n      } else {\n        $('.pensioenwensen .pensioen-aowleeftijd').html(\"-\");\n        $('.pensioenwensen .pensioen-leeftijd').html(\"-\");\n      }\n    } else if (tableData.pensionsoonerlater === 'N') {\n      $('.pensioenwensen .pensioen-leeftijd').html(\"-\");\n      $('.pensioenwensen .pensioen-eerderoflater').html(\"Nee\");\n      $('.pensioenwensen .pensioen-aowleeftijd').html(\"-\");\n\n    } else {\n      $('.pensioenwensen .pensioen-leeftijd').html(\"-\");\n      $('.pensioenwensen .pensioen-eerderoflater').html(\"-\");\n      $('.pensioenwensen .pensioen-aowleeftijd').html(\"-\");\n    }\n\n    if (tableData.parttimepension === 'J') {\n      $('.pensioenwensen .parttime-pensioen').html(\"Ja\");\n      $('.pensioenwensen .parttime-pensioen-leeftijd').html(tableData.parttimepensionageyear + ' jaar ' + tableData.parttimepensionagemonth + ' maanden');\n      $('.pensioenwensen .parttime-pensioen-percentage').html(tableData.parttimepensionperc + \"%\");\n    } else if (tableData.parttimepension === 'N') {\n      $('.pensioenwensen .parttime-pensioen').html(\"Nee\");\n      $('.pensioenwensen .parttime-pensioen-leeftijd').html(\"-\");\n      $('.pensioenwensen .parttime-pensioen-percentage').html(\"-\");\n    } else {\n      $('.pensioenwensen .parttime-pensioen').html(\"-\");\n      $('.pensioenwensen .parttime-pensioen-leeftijd').html(\"-\");\n      $('.pensioenwensen .parttime-pensioen-percentage').html(\"-\");\n    }\n\n    if (tableData.pensionheightadjust === 'J') {\n      $('.pensioenwensen .pensioen-variatie').html(\"Ja\");\n\n      if (tableData.adjusttype === 'H') {\n        $('.pensioenwensen .pensioen-variatie-type').html(\"Hoog/laag\");\n        $('.pensioenwensen .pensioen-variatie-perc').html(tableData.adjustheighthigh + \" jaar\");\n      } else if (tableData.adjusttype === 'L') {\n        $('.pensioenwensen .pensioen-variatie-type').html(\"Laag/hoog\");\n        $('.pensioenwensen .pensioen-variatie-perc').html(tableData.adjustheightlow + \" jaar\");\n      }\n    } else if (tableData.pensionheightadjust === 'N') {\n      $('.pensioenwensen .pensioen-variatie-type').html(\"Nee\");\n      $('.pensioenwensen .pensioen-variatie-perc').html(\"-\");\n      $('.pensioenwensen .pensioen-variatie').html(\"Nee\");\n    } else {\n      $('.pensioenwensen .pensioen-variatie-type').html(\"-\");\n      $('.pensioenwensen .pensioen-variatie-perc').html(\"-\");\n      $('.pensioenwensen .pensioen-variatie').html(\"-\");\n    }\n\n    if (tableData.partnerpension === 'P' || tableData.partnerpension === 'O' || tableData.partnerpension === 'N' && tableData.whendeceased !== '') {\n      $('.pensioenwensen .pensioen-partner-vraag').html(\"Wilt u bij overlijden na pensioendatum een (hogere) uitkering voor uw partner of wilt u een hoger ouderdomspensioen zolang u leeft?\");\n    } else {\n      $('.pensioenwensen .pensioen-partner-vraag').html(\"Wilt u de hoogte van het partnerpensioen wijzigen?\");\n    }\n    if (tableData.partnerpension === 'P' && tableData.whendeceased !== '') {\n      $('.pensioenwensen .pensioen-perc').html(tableData.pensionperc + \"%\");\n      $('.pensioenwensen .pensioen-partner').html(\"Hoger ouderdomspensioen\");\n    } else if (tableData.partnerpension === 'O' && tableData.whendeceased !== '') {\n      $('.pensioenwensen .pensioen-perc').html(\"-\");\n      $('.pensioenwensen .pensioen-partner').html(\"Hogere uitkering voor partner\");\n    } else if (tableData.partnerpension === 'N' && tableData.whendeceased !== '') {\n      $('.pensioenwensen .pensioen-perc').html(\"-\");\n      $('.pensioenwensen .pensioen-partner').html(\"Nee\");\n    } else if (tableData.partnerpensionwithoutpartner === 'O' && tableData.whendeceased === '') {\n      $('.pensioenwensen .pensioen-perc').html(\"-\");\n      $('.pensioenwensen .pensioen-partner').html(\"Ja, ouderdomspensioen naar partnerpensioen\");\n    } else {\n      $('.pensioenwensen .pensioen-perc').html(\"-\");\n      $('.pensioenwensen .pensioen-partner').html(\"Nee\");\n    }\n\n    if (tableData.rekterm === \"M\") {\n      $('.pensioenwensen .pensioen-rekterm').html(\"Maandinkomen\");\n    } else if (tableData.rekterm === \"J\") {\n      $('.pensioenwensen .pensioen-rekterm').html(\"Jaarinkomen\");\n    } else {\n      $('.pensioenwensen .pensioen-rekterm').html(\"-\");\n    }\n\n    $('.uw-gegevens h6 a').css('display', 'inline');\n    $('.download').show();\n    $('.send-email').show();\n    $('.print').show();\n\n    //$('.pensioenwensen').show('fast');\n  },\n  updateTexts: function (explanation) {\n    $('.explanation').remove();\n\n    var graphInsertPoint = $('.mijngetal-grid .schedule-appointment-button').parent();\n    var htmlString = '<div class=\"explanation\">';\n    var i;\n    if (explanation.disclaimer !== null && explanation.disclaimer !== '') {\n      htmlString += '<div class=\"disclaimer\"><p class=\"disclaimer\">';\n      htmlString += explanation.disclaimer;\n      htmlString += '</p></div>';\n    }\n    htmlString += '<p class=\"shortage\">';\n    htmlString += explanation.title;\n    htmlString += '</p>';\n    htmlString += '<p class=\"solution\">';\n    htmlString += explanation.subtitle;\n    htmlString += '</p>';\n\n    // Construct result table\n    if (explanation.tableheaders !== null && explanation.tableheaders !== '') {\n      var headerRow = explanation.tableheaders.split(\";\");\n      var firstRow = explanation.firstrow.split(\";\");\n      var secondRow = explanation.secondrow.split(\";\");\n      var thirdRow = null;\n      var fourthRow = null;\n      var fifthRow = null;\n\n      if (explanation.thirdrow !== null) {\n        thirdRow = explanation.thirdrow.split(\";\");\n      }\n\n      if (explanation.fourthrow !== null) {\n        fourthRow = explanation.fourthrow.split(\";\");\n      }\n\n      if (explanation.fifthrow !== null) {\n        fifthRow = explanation.fifthrow.split(\";\");\n      }\n\n      htmlString += '<table>';\n      htmlString += '<tr>';\n\n      for (i = 0; i < headerRow.length + 1; i++) {\n        // First header column is empty\n        if (i > 0) {\n          htmlString += '<td>' + headerRow[i - 1] + '</td>';\n        } else {\n          htmlString += '<td></td>';\n        }\n      }\n\n      htmlString += '</tr>';\n      htmlString += '<tr>';\n\n      for (i = 0; i < firstRow.length; i++) {\n        htmlString += '<td class=\"solution\">' + firstRow[i] + '</td>';\n      }\n\n      htmlString += '</tr>';\n      htmlString += '<tr>';\n\n      for (i = 0; i < secondRow.length; i++) {\n        htmlString += '<td class=\"solution\">' + secondRow[i] + '</td>';\n      }\n\n      htmlString += '</tr>';\n\n      if (thirdRow !== null) {\n        htmlString += '<tr>';\n\n        for (i = 0; i < thirdRow.length; i++) {\n          htmlString += '<td class=\"solution\">' + thirdRow[i] + '</td>';\n        }\n\n        htmlString += '</tr>';\n      }\n\n      if (fourthRow !== null) {\n        htmlString += '<tr>';\n\n        for (i = 0; i < fourthRow.length; i++) {\n          htmlString += '<td class=\"solution\">' + fourthRow[i] + '</td>';\n        }\n\n        htmlString += '</tr>';\n      }\n\n      if (fifthRow !== null) {\n        htmlString += '<tr>';\n\n        for(i=0; i < fifthRow.length; i++) {\n          htmlString += '<td class=\"solution\">' + fifthRow[i] + '</td>';\n        }\n\n        htmlString += '</tr>';\n      }\n\n      htmlString += '</table>';\n    }\n\n    if (explanation.partnersubtitle !== null) {\n      htmlString += '<p class=\"solution\">';\n      htmlString += explanation.partnersubtitle;\n      htmlString += '</p>';\n    }\n\n    htmlString += '</div>';\n\n    $(htmlString).insertBefore(graphInsertPoint);\n  },\n  lock: function () {\n\n\n    // $('.mijngetal-grid .service-column > .block').addClass('loading');\n    $('.mijngetal-grid .service-column > .component').addClass('loading');\n  },\n  unlock: function () {\n\n\n    // $('.mijngetal-grid .service-column').removeClass('loading');\n    $('.mijngetal-grid .service-column .loading').removeClass('loading');\n\n    $('.mijngetal-grid .schedule-appointment').show();\n\n  }\n\n};\n\nfunction applyDialog(scope) {\n  jQuery('[rel=\"ajax-dialog\"]:not([data-initialized=\"true\"])', scope || document).each(function () {\n\n    var dialog = new window.app.Dialog({themes: ['light', 'l']});\n    var $element = $(this);\n    var href = $element.attr('href');\n    var pattern = /<body[^>]*>((.|[\\n\\r])*)<\\/body>/im;\n    var tmvl = 'tmvl=' + Math.random();\n    var urlGlue = '&';\n\n    this.setAttribute('data-initialized', true);\n\n    if (href.indexOf('?') === -1) {\n      urlGlue = '?';\n    }\n\n    $element.click(function (event) {\n      event.preventDefault();\n\n      href = event.target.href;\n\n      jQuery\n        .ajax({\n          url: [href, tmvl].join(urlGlue),\n          timeout: nn.settings.ajaxTimeout\n        })\n        .done(function (data) {\n          var results = pattern.exec(data);\n          var contents = data;\n          if (results !== null) {\n            contents = results[1]\n          }\n\n          dialog.setContent(contents);\n          dialog.show();\n        })\n        .fail(function () {\n        });\n\n    });\n\n\n  });\n}\n\napplyDialog(document);\n\n// function updateFlexToolResults(results) {\n//   setTimeout(function () {\n//     nn.api.flexTool.resultColumn.update(results);\n//   }, 0);\n// }\n\nnn.flexTool.initializeComponents();\n\n$('.mijngetal-grid .service-column .component:first').each(function () {\n  nn.api.flexTool.resultColumn = new nn.tools.flexTool.ResultColumn(this);\n});"],"sourceRoot":""}